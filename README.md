# Volume & Sound Normalizer Pro

YouTubeや他のウェブサイトで動画視聴時の音量を自動調整するChrome拡張機能です。コンプレッサーやラウドネスノーマライザーを使って、音量のばらつきを抑え、快適な視聴体験を提供します。

## 機能

- **音量調整**: 手動で音量レベルを調整
- **ダイナミックコンプレッション**: 音の大小差を自動で調整
- **ラウドネスノーマライズ**: 異なる動画間の音量を一定レベルに自動調整
- **チャンネルごとの設定保存**: YouTubeチャンネルごとに異なる設定を保存
- **リアルタイムラウドネスメーター**: 現在の音量レベルを視覚的に表示

## 開発者モードでのインストール方法

1. **リポジトリをクローンまたはダウンロード**
   ```
   git clone https://github.com/yourusername/volume-normalizer-pro.git
   ```
   またはZIPファイルとしてダウンロードして解凍します。

2. **Chromeで拡張機能の管理ページを開く**
   - Chromeを開き、アドレスバーに `chrome://extensions/` と入力
   - または、メニュー → その他のツール → 拡張機能 を選択

3. **デベロッパーモードを有効化**
   - 右上の「デベロッパーモード」トグルをオンに切り替える

4. **拡張機能をロード**
   - 「パッケージ化されていない拡張機能を読み込む」ボタンをクリック
   - ダウンロードした拡張機能のフォルダを選択（manifest.jsonファイルが含まれるフォルダ）

5. **拡張機能が読み込まれ、使用可能になります**
   - Chrome右上に拡張機能のアイコンが表示されます

## 使用方法

1. YouTubeなどの動画ページで拡張機能のアイコンをクリックしてポップアップを開きます。

2. **音質補正（コンプレッサー）**:
   - トグルスイッチでオン/オフを切り替え
   - 音量調整スライダーで手動調整
   - 「コンプレッサー詳細設定」で詳細なパラメータを調整

3. **ラウドネスノーマライズ**:
   - トグルスイッチでオン/オフを切り替え
   - ラウドネスメーターで現在の音量レベルを確認
   - 「ラウドネス設定」で目標レベルと許容範囲を調整

4. **設定の保存**:
   - YouTubeでは「チャンネルに保存」で現在のチャンネルに設定を保存
   - 「デフォルトとして保存」で全チャンネルのデフォルト設定として保存

## パラメータ説明

### 音量調整
- **音量調整 (dB)**: 全体的な音量を調整します (-12dB〜+30dB)

### ラウドネス設定
- **目標レベル (LUFS)**: 目標とする音量レベル (-36〜-6 LUFS、初期値: -20 LUFS)
- **許容範囲 (dB)**: 自動調整を行わない許容範囲 (1〜10 dB)

### コンプレッサー詳細設定
- **閾値 (dB)**: コンプレッサーが動作を始める音量レベル
- **比率**: 圧縮の強さ（高いほど圧縮が強い）
- **アタック (ms)**: 音量が閾値を超えてから圧縮が始まるまでの時間
- **リリース (ms)**: 音量が閾値以下に戻ってから圧縮が終わるまでの時間
- **ニー幅 (dB)**: 圧縮の始まり方（滑らかさ）

## トラブルシューティング

- **拡張機能が反応しない場合**: ページを更新してください
- **音が出ない/歪む場合**: 「音量調整」を下げるか、コンプレッサーをオフにしてください
- **設定が保存されない場合**: ストレージの許可が正しく設定されているか確認してください

## ファイル構成

- **manifest.json**: 拡張機能のメタデータと設定
- **background.js**: バックグラウンドで動作するスクリプト
- **content.js**: ウェブページに注入されるスクリプト
- **popup.html/js**: 拡張機能のポップアップUI
- **loudness-processor.js**: ラウドネス測定と調整のためのWebAudio処理
- **images/**: アイコンなどの画像ファイル

## 技術仕様

- **Web Audio API**: オーディオ処理に使用
- **AudioWorklet API**: ラウドネス測定に使用
- **Chrome Storage API**: 設定の保存に使用
- **JavaScript ES6+**: 全体的なコード実装

## 注意事項

- 開発者モードでインストールした拡張機能は、Chromeを再起動すると無効になることがあります。その場合は拡張機能の管理ページで再度有効化してください。
- この拡張機能はYouTubeに最適化されていますが、他のHTML5ビデオを使用するサイトでも動作します。
